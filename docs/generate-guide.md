# 文生图功能说明

本文档详细介绍 AstrBot AI 图像生成插件的文生图功能，帮助您快速掌握使用方法。

## 目录

- [概述](#概述)
- [功能特点](#功能特点)
- [基本用法](#基本用法)
- [参数说明](#参数说明)
- [比例选择](#比例选择)
- [使用示例](#使用示例)
- [提示词技巧](#提示词技巧)
- [常见问题](#常见问题)
- [相关文档](#相关文档)

## 概述

文生图功能使用 Gitee AI 的图像生成模型，通过自然语言描述生成高质量图片。支持多种图片比例和分辨率，可以轻松实现从文字到图像的转换。

## 功能特点

- ✅ **自然语言控制**：用简单的文字描述即可生成图片
- ✅ **多种比例支持**：支持 7 种常用比例，共 16 种尺寸
- ✅ **高质量输出**：生成高质量的图片，细节丰富
- ✅ **快速响应**：优化的 API 调用，快速返回结果
- ✅ **速率限制**：内置防抖和速率限制，避免滥用
- ✅ **耗时显示**：显示图片生成耗时，便于了解性能

## 基本用法

### 命令格式

```
/ai-gitee generate <提示词> [比例]
```

### 使用步骤

1. **输入命令**：在聊天中输入生成命令
2. **描述图片**：用自然语言描述您想要的图片
3. **指定比例**（可选）：选择合适的图片比例
4. **等待结果**：AI 处理完成后会返回生成的图片

### 示例

```
/ai-gitee generate 一只可爱的猫咪
```

```
/ai-gitee generate 美丽的日落风景 16:9
```

## 参数说明

### 提示词（必需）

描述您想要的图片内容，使用自然语言即可。

**示例**：
- `一只可爱的猫咪`
- `美丽的日落风景`
- `一个穿着粉色连衣裙的女孩站在樱花树下`

**提示词编写技巧**：
- 📝 使用具体、清晰的描述
- 🎨 描述主体、场景、风格
- 🌄 描述光线、氛围
- 👤 描述人物特征（如果需要）

### 比例（可选）

指定图片的长宽比，决定生成图片的形状。

| 比例   | 说明   | 常用场景     |
|------|------|----------|
| 1:1  | 正方形  | 头像、社交媒体  |
| 4:3  | 横向   | 传统照片、显示器 |
| 3:4  | 纵向   | 人像摄影、竖屏  |
| 3:2  | 横向宽屏 | 风景摄影     |
| 2:3  | 纵向宽屏 | 人像艺术     |
| 16:9 | 宽屏   | 电脑壁纸     |
| 9:16 | 竖屏   | 手机壁纸     |

**默认值**：1:1（1024x1024）

## 比例选择

### 1:1 - 正方形

**适用场景**：
- 社交媒体头像（微信、QQ、微博等）
- Instagram 正方形照片
- 产品图片展示
- 图标和徽章

**可用尺寸**：
- 256x256 - 超小尺寸，适合图标
- 512x512 - 小尺寸，适合缩略图
- 1024x1024 - 中等尺寸，默认选择
- 2048x2048 - 大尺寸，高质量

**使用示例**：
```
/ai-gitee generate 一个可爱的女孩头像 1:1
```

---

### 4:3 - 横向

**适用场景**：
- 传统数码相机照片
- 平板电脑显示
- 旧式显示器（4:3）
- 文档扫描件

**可用尺寸**：
- 1152x896 - 中等尺寸
- 2048x1536 - 大尺寸，高质量

**使用示例**：
```
/ai-gitee generate 美丽的风景 4:3
```

---

### 3:4 - 纵向

**适用场景**：
- 人像摄影
- 竖屏文档
- 书籍封面
- 竖版海报
- 平板电脑竖屏

**可用尺寸**：
- 768x1024 - 中等尺寸
- 1536x2048 - 大尺寸，高质量

**使用示例**：
```
/ai-gitee generate 一个穿着连衣裙的女孩 3:4
```

---

### 3:2 - 横向宽屏

**适用场景**：
- 风景摄影
- 35mm 胶片风格照片
- 专业摄影作品
- 艺术展览
- 印刷品

**可用尺寸**：
- 2048x1360 - 大尺寸，高质量

**使用示例**：
```
/ai-gitee generate 壮丽的山脉风景 3:2
```

---

### 2:3 - 纵向宽屏

**适用场景**：
- 人像艺术摄影
- 竖版艺术作品
- 杂志封面
- 竖版海报
- 时尚摄影

**可用尺寸**：
- 1360x2048 - 大尺寸，高质量

**使用示例**：
```
/ai-gitee generate 时尚模特肖像 2:3
```

---

### 16:9 - 宽屏

**适用场景**：
- 电脑壁纸
- 视频缩略图
- 宽屏显示器
- 电影海报
- 横版 Banner

**可用尺寸**：
- 1024x576 - 中等尺寸
- 2048x1152 - 大尺寸，高质量

**使用示例**：
```
/ai-gitee generate 科幻城市夜景 16:9
```

---

### 9:16 - 竖屏

**适用场景**：
- 手机壁纸
- 短视频封面
- 社交媒体竖屏图片
- 手机全屏显示
- 竖版广告

**可用尺寸**：
- 576x1024 - 中等尺寸
- 1152x2048 - 大尺寸，高质量

**使用示例**：
```
/ai-gitee generate 美丽的日落 9:16
```

---

## 使用示例

### 示例 1：基本用法 - 默认比例

**目标**：生成一张正方形的猫咪图片

**命令**：
```
/ai-gitee generate 一只可爱的猫咪
```

**预期效果**：
- ✅ 生成 1024x1024 的正方形图片
- ✅ 可爱的猫咪形象
- ✅ 默认质量

---

### 示例 2：指定比例 - 宽屏壁纸

**目标**：生成一张宽屏电脑壁纸

**命令**：
```
/ai-gitee generate 科幻城市夜景，霓虹灯闪烁，未来感 16:9
```

**预期效果**：
- ✅ 生成 2048x1152 的宽屏图片
- ✅ 完美适配宽屏显示器
- ✅ 科幻风格

---

### 示例 3：指定比例 - 手机壁纸

**目标**：生成一张竖屏手机壁纸

**命令**：
```
/ai-gitee generate 美丽的日落海滩，金色的阳光，电影感 9:16
```

**预期效果**：
- ✅ 生成 1152x2048 的竖屏图片
- ✅ 完美适配手机屏幕
- ✅ 电影级画面

---

### 示例 4：详细描述 - 人像

**目标**：生成一张详细的动漫风格人像

**命令**：
```
/ai-gitee generate 一个穿着粉色连衣裙的女孩，站在樱花树下，粉色长发，蓝色眼睛，微笑，柔和的阳光透过花瓣洒在她身上，动漫风格，高质量，8K 3:4
```

**预期效果**：
- ✅ 生成 1536x2048 的纵向图片
- ✅ 动漫风格
- ✅ 细节丰富
- ✅ 高质量

---

### 示例 5：风景摄影

**目标**：生成一张专业的风景摄影作品

**命令**：
```
/ai-gitee generate 壮丽的山脉风景，云雾缭绕，清晨的阳光，写实风格，高质量 3:2
```

**预期效果**：
- ✅ 生成 2048x1360 的横向图片
- ✅ 写实风格
- ✅ 专业摄影效果
- ✅ 高质量

---

## 提示词技巧

### 技巧 1：使用具体的描述

**模糊描述**：
```
一只猫
```

**具体描述**：
```
一只可爱的橘色猫咪，坐在窗台上，阳光透过窗户洒在它身上，毛茸茸的毛发闪闪发光，背景是蓝天白云
```

---

### 技巧 2：描述主体和动作

**示例**：
```
一个20岁的女孩，长发，微笑，穿着白色连衣裙，在樱花树下散步
```

---

### 技巧 3：描述场景和背景

**示例**：
```
一个女孩站在樱花树下，背景是蓝天白云，花瓣随风飘落，柔和的阳光
```

---

### 技巧 4：描述风格和质量

**示例**：
```
动漫风格，高质量，8K，细节丰富，杰作
```

**常用质量关键词**：
- `high quality` - 高质量
- `8K` - 8K 分辨率
- `highly detailed` - 高度细节
- `masterpiece` - 杰作
- `best quality` - 最佳质量
- `ultra detailed` - 超级细节

---

### 技巧 5：描述光线和氛围

**示例**：
```
柔和的晨光，营造宁静的氛围
```

```
戏剧性的侧光，创造电影感
```

```
温暖的夕阳光线，营造浪漫的氛围
```

---

### 技巧 6：使用英文提示词

虽然模型支持中文，但英文提示词通常效果更好。

**中文提示词**：
```
一个可爱的女孩
```

**英文提示词**：
```
a beautiful young woman, pink hair, blue eyes, smiling, wearing a white dress, standing under cherry blossom trees, soft sunlight, anime style, high quality, 8K
```

---

### 技巧 7：组合多个元素

**示例**：
```
主体 + 动作 + 场景 + 风格 + 质量
```

**完整示例**：
```
一个穿着粉色连衣裙的女孩（主体），站在樱花树下散步（动作），背景是蓝天白云（场景），动漫风格（风格），高质量，8K（质量）
```

---

## 常见问题

### Q: 如何选择合适的比例？

**A**: 根据使用场景选择：
- 📱 手机壁纸：9:16
- 🖥️ 电脑壁纸：16:9
- 👤 社交媒体头像：1:1
- 🌄 风景摄影：3:2
- 👤 人像摄影：2:3

详见[支持的图像尺寸](image-sizes.md)文档。

### Q: 生成图片需要多长时间？

**A**: 生成时间取决于图片大小和复杂度：
- 小尺寸（512x512）：通常 10-30 秒
- 中等尺寸（1024x1024）：通常 30-60 秒
- 大尺寸（2048x2048）：通常 60-120 秒

### Q: 如何提高图片质量？

**A**: 可以通过以下方式：
1. 使用更大的尺寸
2. 添加质量关键词
3. 使用详细的提示词
4. 切换到高质量模型

### Q: 提示词为空会怎样？

**A**: 会返回错误提示：
```
请提供提示词！使用方法：/ai-gitee generate <提示词> [比例]
```

### Q: 可以同时生成多张图片吗？

**A**: 不支持。每次命令只能生成一张图片。如需多张，请多次调用命令。

### Q: 生成失败怎么办？

**A**: 检查以下几点：
1. API Key 是否有效
2. 网络连接是否正常
3. 提示词是否正确
4. 查看错误日志

### Q: 如何查看生成耗时？

**A**: 命令会自动显示生成耗时：
```
图片生成完成，耗时：45.32秒
```

### Q: 可以自定义尺寸吗？

**A**: 不可以。只能使用预定义的比例和尺寸。详见[支持的图像尺寸](image-sizes.md)文档。

### Q: 如何切换模型？

**A**: 使用以下命令切换模型：
```
/ai-gitee switch-model <模型名称>
```

详见[使用指南](user-guide.md)文档。

### Q: 为什么有时生成很快，有时很慢？

**A**: 生成速度取决于：
- 图片大小（大尺寸需要更长时间）
- 服务器负载（高峰时段可能较慢）
- 网络延迟
- 模型选择（不同模型速度不同）

### Q: 可以保存生成的图片吗？

**A**: 可以。生成的图片会保存到插件目录，您可以：
- 直接查看图片文件
- 使用其他工具保存图片
- 插件会定期清理旧图片

### Q: 提示词有字数限制吗？

**A**: 建议提示词长度在 200-500 字之间：
- 太短：描述不够具体
- 太长：可能超出模型处理能力

### Q: 如何优化提示词？

**A**: 提示词优化建议：
1. 📝 使用具体、清晰的描述
2. 🎨 描述主体、场景、风格
3. 🌄 描述光线、氛围
4. 👤 描述人物特征（如果需要）
5. ✨ 添加质量关键词
6. 🔄 尝试不同的表达方式

---

## 高级用法

### 组合使用风格转换

先生成基础图片，再使用风格转换：

```
# 步骤 1：生成基础图片
/ai-gitee generate 一个可爱的女孩

# 步骤 2：转换为手办风格
[发送上一步生成的图片]
/ai-gitee style 手办化
```

---

### 批量生成

多次调用命令生成多张图片：

```
/ai-gitee generate 一只橘色的猫咪
/ai-gitee generate 一只白色的猫咪
/ai-gitee generate 一只黑色的猫咪
/ai-gitee generate 一只花色的猫咪
```

---

### 渐进式优化

逐步优化提示词：

```
# 第一次尝试
/ai-gitee generate 一个女孩

# 第二次优化（添加更多细节）
/ai-gitee generate 一个穿着粉色连衣裙的女孩，微笑

# 第三次优化（添加场景和风格）
/ai-gitee generate 一个穿着粉色连衣裙的女孩，站在樱花树下，微笑，动漫风格

# 第四次优化（添加质量关键词）
/ai-gitee generate 一个穿着粉色连衣裙的女孩，站在樱花树下，微笑，动漫风格，高质量，8K
```

---

## 最佳实践

### 1. 选择合适的比例

根据使用场景选择合适的比例：
- 📱 手机壁纸：9:16
- 🖥️ 电脑壁纸：16:9
- 👤 社交媒体头像：1:1
- 🌄 风景摄影：3:2
- 👤 人像摄影：2:3

### 2. 编写清晰的提示词

- ✅ 使用具体、明确的描述
- ✅ 描述主体、场景、风格
- ✅ 避免模糊不清的描述

### 3. 添加质量关键词

在提示词末尾添加质量关键词：
```
high quality, 8K, highly detailed, masterpiece, best quality
```

### 4. 使用英文提示词

虽然模型支持中文，但英文提示词通常效果更好。

### 5. 逐步优化

- 🔄 不要期望一次就完美
- 🔄 可以多次尝试不同的提示词
- 🔄 根据生成结果调整提示词

---

## 相关文档

- 📖 [快速开始](getting-started.md) - 安装和配置指南
- ⚙️ [配置说明](configuration.md) - 详细的配置选项
- 📚 [使用指南](user-guide.md) - 指令调用方法
- 🎭 [AI 图片编辑指南](ai-edit-guide.md) - AI 图片编辑功能详解
- 📐 [支持的图像尺寸](image-sizes.md) - 尺寸和比例详情
- 🖼️ [出图展示区](examples.md) - 生成示例和提示词技巧
- 🛠️ [故障排除](troubleshooting.md) - 常见问题解决

---

## 快速参考

### 常用比例

| 比例   | 用途   | 命令示例                         |
|------|------|------------------------------|
| 1:1  | 头像   | `/ai-gitee generate 头像 1:1`  |
| 16:9 | 电脑壁纸 | `/ai-gitee generate 壁纸 16:9` |
| 9:16 | 手机壁纸 | `/ai-gitee generate 壁纸 9:16` |
| 3:2  | 风景   | `/ai-gitee generate 风景 3:2`  |
| 2:3  | 人像   | `/ai-gitee generate 人像 2:3`  |

### 常用提示词模板

#### 人物肖像
```
一个[年龄][性别]，[发型]，[表情]，[服装]，在[场景]，[光线]，[风格]，高质量
```

#### 风景画
```
[场景描述]，[时间]，[天气]，[光线]，[风格]，高质量
```

#### 动物
```
一只[动物种类]，[颜色]，[动作]，在[场景]，[光线]，[风格]
```

---

希望本文档能帮助您快速掌握文生图功能！如有疑问，请参考相关文档或寻求帮助。🎨✨