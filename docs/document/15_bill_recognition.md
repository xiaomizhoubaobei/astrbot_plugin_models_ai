# 发票/票据识别功能文档

## 功能概述
该功能从发票、收据等票据图片中自动识别并提取关键信息，包括金额、日期、商家名称、商品明细等。

## 实现方式
- 集成OCR和票据识别API
- 使用现有图像处理能力
- 通过现有命令系统输出结果

## 命令接口
```
/ai-gitee ocr-bill <票据图片>
```

## 支持票据类型
- invoice (增值税发票)
- receipt (普通收据)
- expense (费用报销单)
- train-ticket (火车票)
- flight-ticket (飞机票)
- hotel (酒店住宿单)

## 识别内容
- 金额信息（大写、小写）
- 时间日期
- 商家名称和税号
- 商品/服务明细
- 付款方信息

## 输入参数
- 票据图片文件
- 票据类型（可选，自动识别）
- 输出格式（结构化、纯文本）

## 输出结果
- 识别的结构化数据
- 关键信息高亮显示
- 可选：原始图片标记结果

## 识别精度
- 金额识别：99%+
- 日期识别：98%+
- 文字识别：95%+
- 实体识别：90%+

## 数据验证
- 金额数字一致性检查
- 日期有效性验证
- 税号格式验证
- 逻辑关系验证

## 安全处理
- 敏感信息脱敏处理
- 本地数据加密传输
- 临时文件自动清理
- 识别结果不保存

## 输出格式
```
票据类型: [类型]
开票日期: [日期]
总金额: ¥[金额]
商户名称: [名称]
商品明细:
  - [商品1]: ¥[价格]
  - [商品2]: ¥[价格]
```

## 错误处理
- 票据模糊不清时提示重新拍摄
- 识别失败时提供人工校验建议
- 关键信息缺失时标注意外

## 适用场景
- 财务报销整理
- 发票归档管理
- 消费统计分析
- 税务申报辅助