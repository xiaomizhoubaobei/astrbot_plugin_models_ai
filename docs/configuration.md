# é…ç½®è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† AstrBot AI å›¾åƒç”Ÿæˆæ’ä»¶çš„æ‰€æœ‰é…ç½®é€‰é¡¹ã€å‚æ•°è¯´æ˜å’Œæœ€ä½³å®è·µã€‚

## ç›®å½•

- [é…ç½®æ¦‚è§ˆ](#é…ç½®æ¦‚è§ˆ)
- [åŸºç¡€é…ç½®](#åŸºç¡€é…ç½®)
- [API é…ç½®](#api-é…ç½®)
- [å›¾åƒç”Ÿæˆé…ç½®](#å›¾åƒç”Ÿæˆé…ç½®)
- [é«˜çº§é…ç½®](#é«˜çº§é…ç½®)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## é…ç½®æ¦‚è§ˆ

æ’ä»¶é…ç½®æ–‡ä»¶ä½äº AstrBot çš„æ’ä»¶é…ç½®ç›®å½•ä¸­ï¼Œé€šå¸¸æ ¼å¼ä¸º JSONã€‚é…ç½®é¡¹åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

| ç±»åˆ«     | é…ç½®é¡¹                                 |
|--------|-------------------------------------|
| API é…ç½® | `api_key`, `base_url`               |
| æ¨¡å‹é…ç½®   | `model`, `num_inference_steps`      |
| å›¾åƒé…ç½®   | `size`, `negative_prompt`           |
| é«˜çº§é…ç½®   | `debug_mode`, `download_image_urls` |

## åŸºç¡€é…ç½®

### api_key

**ç±»å‹**: `list`  
**é»˜è®¤å€¼**: `[]`  
**å¿…å¡«**: æ˜¯

Gitee AI API å¯†é’¥ï¼Œæ”¯æŒé…ç½®å¤šä¸ª Key ä»¥å®ç°è½®è¯¢è°ƒç”¨ã€‚

#### é…ç½®æ ¼å¼

æ”¯æŒä¸¤ç§æ ¼å¼ï¼š

**æ ¼å¼ 1ï¼šå­—ç¬¦ä¸²ï¼ˆé€—å·åˆ†éš”ï¼‰**
```json
{
  "api_key": "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx,sk-yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy"
}
```

**æ ¼å¼ 2ï¼šæ•°ç»„**
```json
{
  "api_key": [
    "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "sk-yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy"
  ]
}
```

#### å¤š Key è½®è¯¢æœºåˆ¶

å½“é…ç½®å¤šä¸ª API Key æ—¶ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å®ç°è½®è¯¢è°ƒç”¨ï¼š

- âœ… **è´Ÿè½½å‡è¡¡**ï¼šå°†è¯·æ±‚å‡åŒ€åˆ†é…åˆ°å„ä¸ª Key
- âœ… **æ•…éšœè½¬ç§»**ï¼šæŸä¸ª Key å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª
- âœ… **é…é¢ç®¡ç†**ï¼šå……åˆ†åˆ©ç”¨å¤šä¸ª Key çš„å…è´¹é¢åº¦

#### æœ€ä½³å®è·µ

1. **ä½¿ç”¨å¤šä¸ª Key**ï¼šå»ºè®®é…ç½®è‡³å°‘ 2-3 ä¸ª API Keyï¼Œæé«˜å¯ç”¨æ€§
2. **å®šæœŸè½®æ¢**ï¼šå®šæœŸæ£€æŸ¥ Key çš„ä½¿ç”¨æƒ…å†µï¼ŒåŠæ—¶è¡¥å……æˆ–æ›´æ¢
3. **å®‰å…¨å­˜å‚¨**ï¼šä¸è¦å°† API Key æäº¤åˆ°å…¬å…±ä»£ç ä»“åº“

#### è·å– API Key

è¯¦è§[å¿«é€Ÿå¼€å§‹æŒ‡å—](getting-started.md#è·å–-api-key)ã€‚

### base_url

**ç±»å‹**: `string`  
**é»˜è®¤å€¼**: `https://ai.gitee.com/v1`  
**å¿…å¡«**: å¦

API åŸºç¡€åœ°å€ï¼Œé€šå¸¸ä¸éœ€è¦ä¿®æ”¹ã€‚

#### é…ç½®ç¤ºä¾‹

```json
{
  "base_url": "https://ai.gitee.com/v1"
}
```

#### æ³¨æ„äº‹é¡¹

- âš ï¸ é™¤éä½¿ç”¨è‡ªå®šä¹‰ API ä»£ç†æˆ–é•œåƒæœåŠ¡ï¼Œå¦åˆ™ä¸è¦ä¿®æ”¹æ­¤é…ç½®
- âš ï¸ ä¿®æ”¹åå¯èƒ½å¯¼è‡´æ’ä»¶æ— æ³•æ­£å¸¸å·¥ä½œ

## API é…ç½®

### model

**ç±»å‹**: `string`  
**é»˜è®¤å€¼**: `z-image-turbo`  
**å¿…å¡«**: å¦

æŒ‡å®šé»˜è®¤ä½¿ç”¨çš„ AI æ¨¡å‹ã€‚

#### å¯ç”¨æ¨¡å‹

| æ¨¡å‹åç§°            | è¯´æ˜                 | ç‰¹ç‚¹           |
|-----------------|--------------------|--------------|
| `z-image-turbo` | é»˜è®¤æ¨¡å‹               | å¿«é€Ÿã€é«˜æ•ˆã€é«˜è´¨é‡    |
| `flux-schnell`  | Flux å¿«é€Ÿç‰ˆ           | ç”Ÿæˆé€Ÿåº¦å¿«ï¼Œé€‚åˆæ‰¹é‡ç”Ÿæˆ |
| `flux-dev`      | Flux å¼€å‘ç‰ˆ           | è´¨é‡æ›´é«˜ï¼Œé€Ÿåº¦ç¨æ…¢    |
| `sd3`           | Stable Diffusion 3 | æœ€æ–°ç‰ˆæœ¬ï¼Œè´¨é‡ä¼˜å¼‚    |
| `qwen-image`    | é€šä¹‰åƒé—®å›¾åƒæ¨¡å‹           | ä¸­æ–‡ä¼˜åŒ–ï¼Œç»†èŠ‚ä¸°å¯Œ    |

#### é…ç½®ç¤ºä¾‹

```json
{
  "model": "z-image-turbo"
}
```

#### åˆ‡æ¢æ¨¡å‹

æ‚¨å¯ä»¥é€šè¿‡å‘½ä»¤åŠ¨æ€åˆ‡æ¢æ¨¡å‹ï¼š

```
/ai-gitee switch-model flux-schnell
```

#### æ¨¡å‹é€‰æ‹©å»ºè®®

- **æ—¥å¸¸ä½¿ç”¨**ï¼š`z-image-turbo`ï¼ˆé€Ÿåº¦ä¸è´¨é‡çš„å¹³è¡¡ï¼‰
- **æ‰¹é‡ç”Ÿæˆ**ï¼š`flux-schnell`ï¼ˆæ›´å¿«é€Ÿåº¦ï¼‰
- **é«˜è´¨é‡éœ€æ±‚**ï¼š`flux-dev` æˆ– `sd3`ï¼ˆæ›´å¥½ç»†èŠ‚ï¼‰
- **ä¸­æ–‡åœºæ™¯**ï¼š`qwen-image`ï¼ˆä¸­æ–‡ç†è§£æ›´å‡†ç¡®ï¼‰

### num_inference_steps

**ç±»å‹**: `int`  
**é»˜è®¤å€¼**: `9`  
**å¿…å¡«**: å¦  
**èŒƒå›´**: 1-50

æ¨ç†æ­¥æ•°ï¼Œæ§åˆ¶å›¾åƒç”Ÿæˆçš„è¿­ä»£æ¬¡æ•°ã€‚

#### å‚æ•°è¯´æ˜

- **ä½å€¼ï¼ˆ1-10ï¼‰**ï¼šç”Ÿæˆé€Ÿåº¦å¿«ï¼Œè´¨é‡é€‚ä¸­
- **ä¸­å€¼ï¼ˆ10-30ï¼‰**ï¼šé€Ÿåº¦ä¸è´¨é‡çš„å¹³è¡¡
- **é«˜å€¼ï¼ˆ30-50ï¼‰**ï¼šç”Ÿæˆè´¨é‡é«˜ï¼Œä½†é€Ÿåº¦æ…¢

#### é…ç½®ç¤ºä¾‹

```json
{
  "num_inference_steps": 9
}
```

#### æœ€ä½³å®è·µ

| åœºæ™¯    | æ¨èå€¼   | è¯´æ˜     |
|-------|-------|--------|
| å¿«é€Ÿé¢„è§ˆ  | 4-6   | å¿«é€ŸæŸ¥çœ‹æ•ˆæœ |
| æ—¥å¸¸ä½¿ç”¨  | 9-15  | é»˜è®¤æ¨è   |
| é«˜è´¨é‡è¾“å‡º | 20-30 | è¿½æ±‚ç»†èŠ‚   |
| è‰ºæœ¯åˆ›ä½œ  | 30-50 | æœ€é«˜è´¨é‡   |

âš ï¸ **æ³¨æ„**ï¼šæ­¥æ•°è¿‡é«˜ä¼šæ˜¾è‘—å¢åŠ ç”Ÿæˆæ—¶é—´å’Œ API æ¶ˆè€—ã€‚

## å›¾åƒç”Ÿæˆé…ç½®

### size

**ç±»å‹**: `string`  
**é»˜è®¤å€¼**: `1024x1024`  
**å¿…å¡«**: å¦

é»˜è®¤å›¾ç‰‡å°ºå¯¸ï¼Œæ ¼å¼ä¸º `å®½xé«˜`ã€‚

#### æ”¯æŒçš„å°ºå¯¸

| æ¯”ä¾‹   | å¯ç”¨å°ºå¯¸                                   | è¯´æ˜   |
|------|----------------------------------------|------|
| 1:1  | 256x256, 512x512, 1024x1024, 2048x2048 | æ­£æ–¹å½¢  |
| 4:3  | 1152x896, 2048x1536                    | æ¨ªå‘   |
| 3:4  | 768x1024, 1536x2048                    | çºµå‘   |
| 3:2  | 2048x1360                              | æ¨ªå‘å®½å± |
| 2:3  | 1360x2048                              | çºµå‘å®½å± |
| 16:9 | 1024x576, 2048x1152                    | å®½å±   |
| 9:16 | 576x1024, 1152x2048                    | ç«–å±   |

#### é…ç½®ç¤ºä¾‹

```json
{
  "size": "1024x1024"
}
```

#### å°ºå¯¸é€‰æ‹©å»ºè®®

- **ç¤¾äº¤åª’ä½“å¤´åƒ**ï¼š512x512 æˆ– 1024x1024
- **æ‰‹æœºå£çº¸**ï¼š9:16 æ¯”ä¾‹ï¼ˆå¦‚ 1152x2048ï¼‰
- **ç”µè„‘å£çº¸**ï¼š16:9 æ¯”ä¾‹ï¼ˆå¦‚ 2048x1152ï¼‰
- **æ‰“å°ç”¨é€”**ï¼š2048x2048 æˆ–æ›´å¤§

#### åŠ¨æ€æŒ‡å®šå°ºå¯¸

æ‚¨å¯ä»¥åœ¨ç”Ÿæˆæ—¶åŠ¨æ€æŒ‡å®šå°ºå¯¸ï¼š

```
/ai-gitee generate ä¸€åªå¯çˆ±çš„çŒ«å’ª 9:16
```

### negative_prompt

**ç±»å‹**: `string`  
**é»˜è®¤å€¼**: è§ä¸‹æ–¹è¯´æ˜  
**å¿…å¡«**: å¦

è´Ÿé¢æç¤ºè¯ï¼Œç”¨äºæŒ‡å®šä¸å¸Œæœ›å‡ºç°åœ¨ç”Ÿæˆå›¾ç‰‡ä¸­çš„å†…å®¹ã€‚

#### é»˜è®¤è´Ÿé¢æç¤ºè¯

```
low quality, bad anatomy, bad hands, text, error, missing fingers, 
extra digit, fewer digits, cropped, worst quality, normal quality, 
jpeg artifacts, signature, watermark, username, blurry
```

#### é…ç½®ç¤ºä¾‹

```json
{
  "negative_prompt": "low quality, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, normal quality, jpeg artifacts, signature, watermark, username, blurry"
}
```

#### å¸¸ç”¨è´Ÿé¢æç¤ºè¯

| ç±»åˆ«   | æç¤ºè¯                                                    |
|------|--------------------------------------------------------|
| è´¨é‡æ§åˆ¶ | `low quality, worst quality, normal quality`           |
| è§£å‰–ç»“æ„ | `bad anatomy, bad hands, missing fingers, extra digit` |
| æ–‡å­—æ°´å° | `text, signature, watermark, username`                 |
| å›¾åƒç¼ºé™· | `blurry, cropped, jpeg artifacts, error`               |

#### è‡ªå®šä¹‰è´Ÿé¢æç¤ºè¯

æ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚æ·»åŠ æˆ–ä¿®æ”¹è´Ÿé¢æç¤ºè¯ï¼š

```json
{
  "negative_prompt": "nsfw, nudity, violence, gore, blood, weapons, low quality, blurry"
}
```

#### æœ€ä½³å®è·µ

- âœ… ä½¿ç”¨è‹±æ–‡æç¤ºè¯ï¼ˆæ¨¡å‹å¯¹è‹±æ–‡ç†è§£æ›´å¥½ï¼‰
- âœ… ç”¨é€—å·åˆ†éš”å¤šä¸ªå…³é”®è¯
- âœ… ä¿æŒç®€æ´ï¼Œé¿å…å†—é•¿æè¿°
- âŒ ä¸è¦åœ¨è´Ÿé¢æç¤ºè¯ä¸­åŒ…å«æ­£é¢æè¿°

## é«˜çº§é…ç½®

### debug_mode

**ç±»å‹**: `bool`  
**é»˜è®¤å€¼**: `false`  
**å¿…å¡«**: å¦

å¯ç”¨ Debug æ—¥å¿—æ¨¡å¼ï¼Œè¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ã€‚

#### é…ç½®ç¤ºä¾‹

```json
{
  "debug_mode": true
}
```

#### ä½¿ç”¨åœºæ™¯

- ğŸ” **é—®é¢˜è¯Šæ–­**ï¼šé‡åˆ°é”™è¯¯æ—¶å¯ç”¨ï¼ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
- ğŸ§ª **åŠŸèƒ½æµ‹è¯•**ï¼šå¼€å‘æˆ–æµ‹è¯•æ–°åŠŸèƒ½æ—¶ä½¿ç”¨
- ğŸ“Š **æ€§èƒ½åˆ†æ**ï¼šç›‘æ§ API è°ƒç”¨å’Œå“åº”æ—¶é—´

#### æ—¥å¿—è¾“å‡ºç¤ºä¾‹

å¯ç”¨åï¼Œæ—¥å¿—ä¼šåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š

```
[AstrBot-GiteeAI] å¼€å§‹åˆå§‹åŒ–æ’ä»¶
[AstrBot-GiteeAI] é…ç½®è§£æå®Œæˆ: model=z-image-turbo, size=1024x1024, api_keys_count=2
[AstrBot-GiteeAI] [ç”Ÿå›¾å‘½ä»¤] æ”¶åˆ°è¯·æ±‚: user_id=123456, prompt=ä¸€åªå¯çˆ±çš„çŒ«å’ª
[AstrBot-GiteeAI] [ç”Ÿå›¾å‘½ä»¤] å¼€å§‹ç”Ÿæˆå›¾ç‰‡: user_id=123456, prompt=ä¸€åªå¯çˆ±çš„çŒ«å’ª, size=1024x1024
[AstrBot-GiteeAI] [ç”Ÿå›¾å‘½ä»¤] å›¾ç‰‡ç”ŸæˆæˆåŠŸ: path=/path/to/image.png, è€—æ—¶=3.45ç§’
```

#### æ³¨æ„äº‹é¡¹

- âš ï¸ Debug æ¨¡å¼ä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—ï¼Œå¯èƒ½å½±å“æ€§èƒ½
- âš ï¸ ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­ï¼Œä»…åœ¨éœ€è¦æ—¶å¯ç”¨

### download_image_urls

**ç±»å‹**: `bool`  
**é»˜è®¤å€¼**: `false`  
**å¿…å¡«**: å¦

æ§åˆ¶å›¾ç‰‡ URL çš„å¤„ç†æ–¹å¼ã€‚

#### é…ç½®é€‰é¡¹

| å€¼       | è¯´æ˜               | æ¨èåœºæ™¯        |
|---------|------------------|-------------|
| `false` | ç›´æ¥ä¼ é€’å›¾ç‰‡ URL ç»™ API | é»˜è®¤æ¨èï¼Œé€Ÿåº¦æ›´å¿«   |
| `true`  | å…ˆä¸‹è½½å›¾ç‰‡å†ä¸Šä¼          | ç‰¹æ®Šéœ€æ±‚ï¼Œå¦‚éœ€æœ¬åœ°å¤„ç† |

#### é…ç½®ç¤ºä¾‹

```json
{
  "download_image_urls": false
}
```

#### ä½¿ç”¨åœºæ™¯

**è®¾ç½®ä¸º `false`ï¼ˆæ¨èï¼‰**ï¼š
- âœ… é€Ÿåº¦æ›´å¿«ï¼Œæ— éœ€ä¸‹è½½å’Œä¸Šä¼ 
- âœ… èŠ‚çœå¸¦å®½å’Œå­˜å‚¨ç©ºé—´
- âœ… é€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯

**è®¾ç½®ä¸º `true`**ï¼š
- ğŸ”§ éœ€è¦å¯¹å›¾ç‰‡è¿›è¡Œæœ¬åœ°é¢„å¤„ç†
- ğŸ”§ API ä¸æ”¯æŒç›´æ¥ä½¿ç”¨ URL
- ğŸ”§ éœ€è¦ç¡®ä¿å›¾ç‰‡å¯è®¿é—®æ€§

#### æ³¨æ„äº‹é¡¹

- âš ï¸ è®¾ç½®ä¸º `true` ä¼šæ˜¾è‘—å¢åŠ å¤„ç†æ—¶é—´
- âš ï¸ éœ€è¦ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å­˜å‚¨ä¸´æ—¶å›¾ç‰‡

## æ€§èƒ½ä¼˜åŒ–

### å¤š Key è½®è¯¢

é…ç½®å¤šä¸ª API Key å¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½å’Œå¯é æ€§ï¼š

```json
{
  "api_key": [
    "sk-key1",
    "sk-key2",
    "sk-key3"
  ]
}
```

**ä¼˜åŠ¿**ï¼š
- ğŸš€ æé«˜å¹¶å‘å¤„ç†èƒ½åŠ›
- ğŸ”„ è‡ªåŠ¨è´Ÿè½½å‡è¡¡
- ğŸ›¡ï¸ å•ç‚¹æ•…éšœä¿æŠ¤

### åˆç†è®¾ç½®æ¨ç†æ­¥æ•°

æ ¹æ®åœºæ™¯è°ƒæ•´ `num_inference_steps`ï¼š

```json
{
  "num_inference_steps": 9
}
```

**å»ºè®®**ï¼š
- æ—¥å¸¸ä½¿ç”¨ï¼š9-15 æ­¥
- å¿«é€Ÿé¢„è§ˆï¼š4-6 æ­¥
- é«˜è´¨é‡è¾“å‡ºï¼š20-30 æ­¥

### é˜²æŠ–é…ç½®

æ’ä»¶å†…ç½®é˜²æŠ–æœºåˆ¶ï¼Œé¿å…é‡å¤è¯·æ±‚ï¼š

- **é˜²æŠ–æ—¶é—´**ï¼š10 ç§’
- **å¹¶å‘é™åˆ¶**ï¼šåŒä¸€ç”¨æˆ·åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªè¯·æ±‚

å¦‚éœ€è°ƒæ•´ï¼Œå¯ä¿®æ”¹æºç ä¸­çš„ `DEBOUNCE_SECONDS` å¸¸é‡ã€‚

### ç¼“å­˜ç®¡ç†

æ’ä»¶ä¼šè‡ªåŠ¨æ¸…ç†ç¼“å­˜çš„å›¾ç‰‡ï¼š

- **æœ€å¤§ç¼“å­˜æ•°é‡**ï¼š20 å¼ 
- **æ¸…ç†é—´éš”**ï¼šæ¯ 10 æ¬¡ç”Ÿæˆæ‰§è¡Œä¸€æ¬¡

## æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†

#### ä½¿ç”¨ç¯å¢ƒå˜é‡

å¯¹äºæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API Keyï¼‰ï¼Œå»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```json
{
  "api_key": "${GITEE_AI_API_KEY}"
}
```

### 2. API Key ç®¡ç†

#### å®šæœŸæ›´æ–°

- ğŸ”„ æ¯æœˆæ£€æŸ¥ API Key ä½¿ç”¨æƒ…å†µ
- ğŸ”„ åŠæ—¶è¡¥å……å…è´¹é¢åº¦
- ğŸ”„ å®šæœŸè½®æ¢ API Key

#### å®‰å…¨å­˜å‚¨

- ğŸ” ä¸è¦å°† API Key æäº¤åˆ°ä»£ç ä»“åº“
- ğŸ” ä½¿ç”¨åŠ å¯†å­˜å‚¨æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
- ğŸ” é™åˆ¶ API Key çš„æƒé™èŒƒå›´

### 3. æç¤ºè¯ä¼˜åŒ–

#### ä½¿ç”¨è‹±æ–‡æç¤ºè¯

```json
{
  "negative_prompt": "low quality, bad anatomy, blurry"
}
```

#### ä¿æŒç®€æ´

```
âœ… å¥½ï¼ša beautiful sunset over the ocean
âŒ å·®ï¼ša very very very beautiful and amazing sunset that is over the big blue ocean with lots of waves
```

#### æ·»åŠ é£æ ¼æè¿°

```
a beautiful sunset over the ocean, cinematic lighting, 8k, highly detailed
```

### 4. å°ºå¯¸é€‰æ‹©

#### æ ¹æ®ç”¨é€”é€‰æ‹©

| ç”¨é€”   | æ¨èå°ºå¯¸      | æ¯”ä¾‹   |
|------|-----------|------|
| å¤´åƒ   | 512x512   | 1:1  |
| æ‰‹æœºå£çº¸ | 1152x2048 | 9:16 |
| ç”µè„‘å£çº¸ | 2048x1152 | 16:9 |
| ç¤¾äº¤åª’ä½“ | 1024x1024 | 1:1  |
| æ‰“å°è¾“å‡º | 2048x2048 | 1:1  |

#### åŠ¨æ€æŒ‡å®š

```
/ai-gitee generate ä¸€åªå¯çˆ±çš„çŒ«å’ª 16:9
```

### 5. é”™è¯¯å¤„ç†

#### å¯ç”¨ Debug æ¨¡å¼

é‡åˆ°é—®é¢˜æ—¶ï¼Œå…ˆå¯ç”¨ Debug æ¨¡å¼ï¼š

```json
{
  "debug_mode": true
}
```

#### æŸ¥çœ‹æ—¥å¿—

æ£€æŸ¥ AstrBot æ—¥å¿—ï¼ŒæŸ¥æ‰¾é”™è¯¯ä¿¡æ¯ï¼š

```
[AstrBot-GiteeAI] å›¾ç‰‡ç”Ÿæˆå¤±è´¥: error=API rate limit exceeded
```

#### å¸¸è§é”™è¯¯

| é”™è¯¯                        | åŸå›          | è§£å†³æ–¹æ¡ˆ         |
|---------------------------|------------|--------------|
| `API rate limit exceeded` | è¶…å‡ºé…é¢       | æ·»åŠ æ›´å¤š API Key |
| `Invalid API key`         | API Key é”™è¯¯ | æ£€æŸ¥é…ç½®         |
| `Network error`           | ç½‘ç»œé—®é¢˜       | æ£€æŸ¥ç½‘ç»œè¿æ¥       |
| `Model not found`         | æ¨¡å‹ä¸å­˜åœ¨      | æ£€æŸ¥æ¨¡å‹åç§°       |

## å®Œæ•´é…ç½®ç¤ºä¾‹

### åŸºç¡€é…ç½®

```json
{
  "api_key": "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  "model": "z-image-turbo",
  "size": "1024x1024",
  "num_inference_steps": 9,
  "negative_prompt": "low quality, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, normal quality, jpeg artifacts, signature, watermark, username, blurry",
  "debug_mode": false,
  "download_image_urls": false
}
```

### é«˜çº§é…ç½®ï¼ˆå¤š Key + Debugï¼‰

```json
{
  "api_key": [
    "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "sk-yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy",
    "sk-zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"
  ],
  "base_url": "https://ai.gitee.com/v1",
  "model": "z-image-turbo",
  "size": "1024x1024",
  "num_inference_steps": 9,
  "negative_prompt": "low quality, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, normal quality, jpeg artifacts, signature, watermark, username, blurry",
  "debug_mode": true,
  "download_image_urls": false
}
```

### é«˜è´¨é‡é…ç½®

```json
{
  "api_key": [
    "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "sk-yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy"
  ],
  "model": "flux-dev",
  "size": "2048x2048",
  "num_inference_steps": 25,
  "negative_prompt": "low quality, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, normal quality, jpeg artifacts, signature, watermark, username, blurry, nsfw, nudity",
  "debug_mode": false,
  "download_image_urls": false
}
```

## æ•…éšœæ’é™¤

### é…ç½®éªŒè¯

#### æ£€æŸ¥é…ç½®æ ¼å¼

ç¡®ä¿é…ç½®æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼š

```bash
python3 -m json.tool config.json
```

#### éªŒè¯ API Key

ä½¿ç”¨ curl æµ‹è¯• API Keyï¼š

```bash
curl -X POST "https://ai.gitee.com/v1/images/generations" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "z-image-turbo",
    "prompt": "a beautiful sunset",
    "n": 1,
    "size": "1024x1024"
  }'
```

### å¸¸è§é—®é¢˜

#### Q: é…ç½®ä¿®æ”¹åä¸ç”Ÿæ•ˆï¼Ÿ

**A**: é‡å¯ AstrBot ä½¿é…ç½®ç”Ÿæ•ˆã€‚

#### Q: API Key è½®è¯¢ä¸å·¥ä½œï¼Ÿ

**A**: æ£€æŸ¥ API Key æ ¼å¼ï¼Œç¡®ä¿ä½¿ç”¨æ•°ç»„æˆ–é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚

#### Q: å›¾ç‰‡ç”Ÿæˆé€Ÿåº¦æ…¢ï¼Ÿ

**A**: 
1. é™ä½ `num_inference_steps`
2. ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹ï¼ˆå¦‚ `flux-schnell`ï¼‰
3. æ·»åŠ æ›´å¤š API Key

#### Q: ç”Ÿæˆå›¾ç‰‡è´¨é‡å·®ï¼Ÿ

**A**:
1. æé«˜ `num_inference_steps`
2. ä½¿ç”¨æ›´é«˜è´¨é‡çš„æ¨¡å‹ï¼ˆå¦‚ `flux-dev`ï¼‰
3. ä¼˜åŒ–æç¤ºè¯æè¿°
4. æ£€æŸ¥è´Ÿé¢æç¤ºè¯é…ç½®

#### Q: å†…å­˜å ç”¨è¿‡é«˜ï¼Ÿ

**A**:
1. å‡å°å›¾ç‰‡å°ºå¯¸
2. é™ä½ `MAX_CACHED_IMAGES` å€¼
3. å®šæœŸæ¸…ç†ç¼“å­˜

### è·å–å¸®åŠ©

å¦‚æœé‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼š

1. ğŸ“– æŸ¥çœ‹[æ•…éšœæ’é™¤æ–‡æ¡£](troubleshooting.md)
2. ğŸ” æ£€æŸ¥ AstrBot æ—¥å¿—
3. ğŸ’¬ åœ¨ [GitHub Issues](https://github.com/xiaomizhoubaobei/astrbot_plugin_models_ai/issues) æé—®
4. ğŸ‘¥ åŠ å…¥ QQ ç¾¤å¯»æ±‚å¸®åŠ©ï¼ˆç¾¤å·è§ READMEï¼‰

## ç›¸å…³æ–‡æ¡£

- ğŸ“– [å¿«é€Ÿå¼€å§‹](getting-started.md) - å®‰è£…å’Œé…ç½®æŒ‡å—
- ğŸ¨ [ä½¿ç”¨æŒ‡å—](user-guide.md) - åŠŸèƒ½ä½¿ç”¨è¯´æ˜
- ğŸ“ [æ”¯æŒçš„å›¾åƒå°ºå¯¸](image-sizes.md) - å°ºå¯¸å’Œæ¯”ä¾‹è¯¦æƒ…
- ğŸ› ï¸ [æ•…éšœæ’é™¤](troubleshooting.md) - å¸¸è§é—®é¢˜è§£å†³